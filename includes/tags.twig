{#!
 # Freelancer for Pico v2.0.7 (https://github.com/mayamcdougall/freelancer-pico)
 # Ported by Maya McDougall (https://github.com/mayamcdougall)
 # Based on upstream Freelancer v7.0.4 by Start Bootstrap (https://startbootstrap.com/theme/freelancer)
 # Licensed under MIT (https://github.com/mayamcdougall/freelancer-pico/blob/main/LICENSE)
 #}
{% from "includes/video.twig" import video %}

{% set tag = url_param('tag', 'string') %}
{% set tags = get_all_tags() %}


<head><title>Search result</tit
le>
</head>
<!-- Portfolio Section-->
<title>Search result</title>
<section class="page-section portfolio" id="portfolio">
    <div class="container">
    <form id="search_form" action="{{ "search"|link }}">
    <label for="search_input">Search the site:</label>
    <input type="search" id="search_input" name="q" value="{{ search_terms|e('html_attr') }}" />
    <input type="submit" value="Search" />
</form>
<script type="text/javascript">
    // Intercept form submit and go to the search results page directly, avoiding a redirect
    document.getElementById('search_form').addEventListener('submit', function (e) {
        var search_terms = document.getElementById('search_input').value;
        location.href = '{{ "search"|link }}/' + encodeURIComponent(search_terms);
        e.preventDefault();
    });
</script>
        <!-- Portfolio Section Heading-->
                 <h3>Search results for {{ search_terms|e('html') }}</h3>
        <!-- Icon Divider-->
        <div class="divider-custom">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon"><i class="fas fa-{{ index.portfolio.divider ? index.portfolio.divider : 'star' }}"></i></div>
            <div class="divider-custom-line"></div>
        </div>
        <!-- Portfolio Grid Items-->
        

  <div class="SearchResults row justify-content-center">
	{% if tag %}
            
    	{% for page in pages if page.title and tags and not (page.id ends with 'index') %}
          
                  {% if page.meta.tags is iterable %}
            {% set pageTags = page.meta.tags %}
        {% else %}
            {% set pageTags = page.meta.tags|split(',') %}
        {% endif %}
          
          
                  {% for pageTag in pageTags %}
                  
                              {% if pageTag|trim == tag %}
                  
                {% set classes = ["col-md-6", "col-lg-4"] %}
                {% if not loop.last %}
                    {% set classes = classes|merge(["mb-5"]) %}
                    {% if loop.revindex <= (loop.length - 1) % 3 + 1 %}
                        {% if loop.revindex == 3 %}
                            {% set classes = classes|merge(["mb-lg-0"]) %}
                        {% elseif loop.revindex == 2 %}
                            {% if loop.index == 2 %}
                                {% set classes = classes|merge(["mb-lg-0"]) %}
                            {% else %}
                                {% set classes = classes|merge(["mb-md-0"]) %}
                            {% endif %}
                        {% endif %}
                    {% elseif loop.revindex == 2 and loop.index == 3 %}
                        {% set classes = classes|merge(["mb-md-0","mb-lg-5"]) %}
                    {% endif %}
                {% endif %}
                


            <div class="{{ classes|join(" ") }}">

                <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal{{ loop.index }}">
                    <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                        <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                    </div>
                    {% if portfolio_item.meta.thumbnail_video %}
                        {{ video(portfolio_item.meta.video, portfolio_item.meta.thumbnail|url ?: portfolio_item.meta.image|url, "portfolio") }}
                    {% else %}
		                <img class="img-fluid d-block mx-auto" src="{{ page.meta.thumbnail ? page.meta.thumbnail|url : page.meta.image ? page.meta.image|url : random(config.theme_config.demo.portfolio_items).meta.image|url }}" alt="{{ page.meta.thumbnail_alt ? page.meta.thumbnail_alt : page.meta.title }}" />
		            {% endif %}
		        </div>
		                   	<h3><a href="{{ page.url }}">{{ page.meta.title }}</a></h3>
           	</div>

            {% endif %}
        {% endfor %}
          {% endfor %}
      {% else %}
          <p>No results found for {{ search_terms|e('html') }}.</p>
      {% endif %}
  </div>



    </div>
    
</section>



